<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>MiCV</title>
    <script>

        const http = {
            page: 'builder',
            view: 'list',
            type: 'web'
        };


        const app = {
            data: undefined,
            actions: {},
            utils: {
                getAsyncModule: async (params, o) => {
                    let fnModule = await  import(params.page);
                    return fnModule.default(params, app);
                },
                renderModule: (selector, content, css) => {
                    document.querySelector(selector).innerHTML = content.concat(css);
                },
                strReduceSpace: (str) => str && str.replace(/\s{2,}/g, '')
            },
            importer: async (HTTP, PAGE, NODE, INDEX) => {
                if (HTTP.page === NODE) {
                    HTTP.page = PAGE;
                    let module = await app.utils.getAsyncModule(HTTP, app);

                    app.actions[INDEX] = module.actions;
                    app.utils.renderModule(
                        '#' + NODE,
                        module.content,
                        app.utils.strReduceSpace(module.css)
                    );
                }
            },
        }

    </script>
</head>
<body>
<div id="builder">
    <script type="module">

        let page = './PAGES/introduction.mjs',
            node = 'builder',
            view = 'resume';

        app.importer(http, page, node, view);

    </script>
</div>
</body>
</html>